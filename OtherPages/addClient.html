<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale-1.0">
	<title>Global Natural Stones</title>
	
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.1.min.js"></script>
	
	<link rel="stylesheet" href="../Stylesheets/Reset.css" type="text/css"/>
	<link rel="stylesheet" href="../Stylesheets/extraForms.css" type="text/css"/>
	<link rel="stylesheet" href="../JQUI/jquery-ui.css"/>
	
	<script type="text/javascript" src="../JQUI/external/jquery/jquery.js"></script>
	<script type="text/javascript" src="../JQUI/jquery-ui.js"></script>
	
	<script name="Get CliID">
		const { ipcRenderer } = require('electron');
		//let cli;
		
		cli = ipcRenderer.sendSync("getID");
		
		console.log(cli);
	</script>
	
	<style>		
		.ui-button{
			margin: 0;
			width: 275px;
		}
		
		label{
			margin-left: 30px;
		}
		
		input[type=checkbox] {
            transform: scale(1.3);
        }    

	</style>
</head>

<body>

<div id="dialogError">
	<p>Please fill out all input areas</p>
</div>

<form id="formMain" method="get" action="">
<h1>Basic Information</h1>
<fieldset>
	

	<label for="first_name">First Name:</label><input required type="text" name="txtName" id="first_name" value="">
	<label for="last_name">Last Name:</label><input required type="text" name="txtLastName" id="last_name" title="Edit the client's last name" value="">

	
	<section>
		<h2>Contact</h2>
		<label for="phone">Phone Number:</label><input required type="number" name="numPhoneNum" id="phone" value="">
		<label for="email">Email:</label><input required type="text" name="txtEmail" id="email"  value="">
	</section>
	
	<section>
		<h2>Address</h2>
		<label for="street_address">Street:</label><input required type="text" name="txtAddressStreet" id="street_address" title="enter street name and house number" value="">
		<label for="zip">Zip code:</label><input required type="text" id="zip">
		
		<label for="city">City:</label>
			<select required name="city" id="city">
				<option value="Day" selected>Dayton</option>
				<option value="Cin">Cincinnati</option>
			</select>
			
		<label for="state">State:</label>
		<select required id="state" name="txtState">
			<option value="AL">Alabama</option>
			<option value="AK">Alaska</option>
			<option value="AZ">Arizona</option>
			<option value="AR">Arkansas</option>
			<option value="CA">California</option>
			<option value="CO">Colorado</option>
			<option value="CT">Connecticut</option>
			<option value="DE">Delaware</option>
			<option value="DC">District Of Columbia</option>
			<option value="FL">Florida</option>
			<option value="GA">Georgia</option>
			<option value="HI">Hawaii</option>
			<option value="ID">Idaho</option>
			<option value="IL">Illinois</option>
			<option value="IN">Indiana</option>
			<option value="IA">Iowa</option>
			<option value="KS">Kansas</option>
			<option value="KY">Kentucky</option>
			<option value="LA">Louisiana</option>
			<option value="ME">Maine</option>
			<option value="MD">Maryland</option>
			<option value="MA">Massachusetts</option>
			<option value="MI">Michigan</option>
			<option value="MN">Minnesota</option>
			<option value="MS">Mississippi</option>
			<option value="MO">Missouri</option>
			<option value="MT">Montana</option>
			<option value="NE">Nebraska</option>
			<option value="NV">Nevada</option>
			<option value="NH">New Hampshire</option>
			<option value="NJ">New Jersey</option>
			<option value="NM">New Mexico</option>
			<option value="NY">New York</option>
			<option value="NC">North Carolina</option>
			<option value="ND">North Dakota</option>
			<option value="OH">Ohio</option>
			<option value="OK">Oklahoma</option>
			<option value="OR">Oregon</option>
			<option value="PA">Pennsylvania</option>
			<option value="RI">Rhode Island</option>
			<option value="SC">South Carolina</option>
			<option value="SD">South Dakota</option>
			<option value="TN">Tennessee</option>
			<option value="TX">Texas</option>
			<option value="UT">Utah</option>
			<option value="VT">Vermont</option>
			<option value="VA">Virginia</option>
			<option value="WA">Washington</option>
			<option value="WV">West Virginia</option>
			<option value="WI">Wisconsin</option>
			<option value="WY">Wyoming</option>
		</select>								
	</section>
	
	<section>
		<h2>Contractor/Ref Info</h2>
		<label for="contractor">Name:</label> <input required type="text" name="txtConName" id="contractor" value="">
		<label for="contractor_phone">Phone Number:</label> <input required type="number" name="numConPhoneNum" id="contractor_phone" value="">
		<label for="contractor_email">Email:</label> <input required type="text" name="txtConEmail" id="contractor_email" value="">
	</section>
	
	<section>
		<h2>Project Info</h2>
		<input required type="text" id="project" value="">
		
		<label for="cabinet">Cabinet:</label><input required type="text" id="cabinet" name="txtCabinet">
		<label for="appliances">Appliances:</label><input required type="text" id="appliances" name="txtAppliances">
		<label for="floor">Floor:</label><input required id="floor" type="text" name="txtFloor">
		<label for="other">Other:</label><input required type="text" id="other" name="txtOtherProj">
	</section>

	<button type="button" class="Save">Save</button>
</fieldset>
</form>

	<script src="Scripts/SortDisplayFunctions.js"></script>
	<script src="Scripts/SendClients.js"></script>
		
	<script>
	const { ipcRenderer } = require('electron');
	
	//creates the message for updating client
	function createAddMessage(parentE = $("body")){
		let newCli = {
			"first_name" : null,
			"last_name" : null,	
			"date_added": null,
			
			//basic
			"phone" : null,
			"email" : null,
			"street_address" : null,
			"city" : null,
			"state" : null,
			"zip" : null,

			"contractor": null,
			"contractor_phone": null,
			"contractor_email": null,
			
			
			"project" : null,
			"cabinet": null,
			"appliances": null,
			"floor": null,
			"other": null,		
		};
		
		$(parentE).find("input, select").each(function(){
			//find the value of each input box
			let content = x(findValue(this));
			let field = $(this).attr("id");
			
			if (content == "")
				content = null;
			
			if(newCli[field] == null ){
				newCli[field] = content;
			}
			
			newCli.date_added = new Date(Date.now()).toISOString();
		});
		
		return newCli;
	}

	$(document).ready(function(){
		$("#dialogError").dialog({
			autoOpen: false,
			modal: true,
			title: "Error",
			  buttons: [
				{
				  text: "Ok",
				  click: function() {
					$( this ).dialog( "close" );
				  }
				}
			  ]
		});
		
		$(".Save").click(function(){
			let error = false;
			
			$("input").each(function(){
				if (!aString($(this).val()))
					error = true;
			});
			if (error){
				$("#dialogError").dialog("open");
				return;
			}
			
			//console.log(createAddMessage());
			ipcRenderer.send("AddClient", createAddMessage());
		});
	})


	</script>
</body>